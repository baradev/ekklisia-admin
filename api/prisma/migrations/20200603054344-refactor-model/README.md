# Migration `20200603054344-refactor-model`

This migration has been generated by nampdn at 6/3/2020, 5:43:44 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "public"."Group" ALTER COLUMN "stage" DROP NOT NULL;
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200603053600-init..20200603054344-refactor-model
--- datamodel.dml
+++ datamodel.dml
@@ -1,7 +1,7 @@
 datasource DS {
   provider = "postgresql"
-  url = "***"
+  url      = env("DATABASE_URL")
 }
 generator client {
   provider      = "prisma-client-js"
@@ -18,50 +18,50 @@
   profileId  String
 }
 model Profile {
-  id              String            @default(cuid()) @id
-  fullName        String
-  gender          String?
-  oldId           String?           @unique
-  slug            String?           @unique
-  email           String?
-  facebookId      String?
-  phoneNumber     String?
-  birthday        DateTime?
-  joinDate        DateTime?
-  dayOfBirth      Int?
-  monthOfBirth    Int?
-  yearOfBirth     Int?
-  org             Org?              @relation("ProfileOrg", fields: [orgId], references: [id])
-  createdAt       DateTime          @default(now())
-  updatedAt       DateTime          @updatedAt
-  leader          Group[]           @relation("GroupLeader")
-  member          Group[]           @relation("GroupMembers", references: [id])
-  attendee        Attendance[]      @relation("AttendanceAttendee", references: [id])
-  absentee        Attendance[]      @relation("AttendanceAbsentee", references: [id])
-  orgId           String?
-  User            User[]            @relation("UserProfile")
-  GroupEnrollment GroupEnrollment[]
+  id           String            @default(cuid()) @id
+  fullName     String
+  gender       String?
+  oldId        String?           @unique
+  slug         String?           @unique
+  email        String?
+  facebookId   String?
+  phoneNumber  String?
+  birthday     DateTime?
+  joinDate     DateTime?
+  dayOfBirth   Int?
+  monthOfBirth Int?
+  yearOfBirth  Int?
+  org          Org?              @relation("ProfileOrg", fields: [orgId], references: [id])
+  createdAt    DateTime          @default(now())
+  updatedAt    DateTime          @updatedAt
+  leader       Group[]           @relation("GroupLeader")
+  member       Group[]           @relation("GroupMembers", references: [id])
+  attendee     Attendance[]      @relation("AttendanceAttendee", references: [id])
+  absentee     Attendance[]      @relation("AttendanceAbsentee", references: [id])
+  orgId        String?
+  user         User[]            @relation("UserProfile")
+  enrollment   GroupEnrollment[]
 }
 model Group {
-  id              String            @default(cuid()) @id
-  name            String
-  slug            String?           @unique
-  year            Int?
-  stage           String
-  members         Profile[]         @relation("GroupMembers", references: [id])
-  startAt         DateTime?
-  endAt           DateTime?
-  createdAt       DateTime          @default(now())
-  updatedAt       DateTime          @updatedAt
-  leader          Profile?          @relation("GroupLeader", fields: [leaderId], references: [id])
-  leaderId        String?
-  GroupEnrollment GroupEnrollment[]
-  Org             Org?              @relation(fields: [orgId], references: [id])
-  orgId           String?
-  Attendance      Attendance[]      @relation("AttendanceGroup")
+  id          String            @default(cuid()) @id
+  name        String
+  slug        String?           @unique
+  year        Int?
+  stage       String?
+  members     Profile[]         @relation("GroupMembers", references: [id])
+  startAt     DateTime?
+  endAt       DateTime?
+  createdAt   DateTime          @default(now())
+  updatedAt   DateTime          @updatedAt
+  leader      Profile?          @relation("GroupLeader", fields: [leaderId], references: [id])
+  leaderId    String?
+  Org         Org?              @relation(fields: [orgId], references: [id])
+  orgId       String?
+  attendances Attendance[]      @relation("AttendanceGroup")
+  enrollment  GroupEnrollment[]
 }
 model GroupEnrollment {
   createdAt DateTime @default(now())
```


